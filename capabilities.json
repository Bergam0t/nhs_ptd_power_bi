{
  "dataRoles": [
    {
      "displayName": "Values (y axis)",
      "kind": "GroupingOrMeasure",
      "name": "value"
    },

    {
      "displayName": "Dates (x axis)",
      "kind": "GroupingOrMeasure",
      "name": "date"
    },

    {
      "displayName": "Identifier (e.g. KPI Name)",
      "kind": "GroupingOrMeasure",
      "name": "what"
    },

    {
      "displayName": "Improvement Direction (increase or decrease)",
      "kind": "GroupingOrMeasure",
      "name": "improvement_direction"
    },

    {
      "displayName": "Target (OPTIONAL)",
      "kind": "GroupingOrMeasure",
      "name": "target"
    },


    {
      "displayName": "Recalculation Points (OPTIONAL)",
      "kind": "GroupingOrMeasure",
      "name": "recalc_here"
    },

    {
      "displayName": "Annotations (OPTIONAL)",
      "kind": "GroupingOrMeasure",
      "name": "comment"
    },

    {
      "displayName": "Baseline Duration (OPTIONAL)",
      "kind": "GroupingOrMeasure",
      "name": "baseline_duration"
    }


  ],
  "dataViewMappings": [
    {
      "conditions": [
        {
          "value": {
            "max": 1
          },
          "date": {
            "max": 1
          },
          "what": {
            "max": 1
          },
          "improvement_direction": {
            "max": 1
          },
          "recalc_here": {
            "max": 1
          },
          "comment": {
            "max": 1
          },
          "baseline_duration": {
            "max": 1
          },
          "target": {
            "max": 1
          }
        }




      ],
      "scriptResult": {
        "dataInput": {
          "table": {
            "rows": {
              "select": [
                {
                  "for": {
                    "in": "value"
                  }
                },
                {
                  "for": {
                    "in": "date"
                  }
                },
                {
                  "for": {
                    "in": "what"
                  }
                },
                {
                  "for": {
                    "in": "improvement_direction"
                  }
                },
                {
                  "for": {
                    "in": "recalc_here"
                  }
                },
                {
                  "for": {
                    "in": "comment"
                  }
                },
                {
                  "for": {
                    "in": "baseline_duration"
                  }
                },
                {
                  "for": {
                    "in": "target"
                  }
                }
              ],
              "dataReductionAlgorithm": {
                "top": {}
              }
            }
          }
        },
        "script": {
          "scriptProviderDefault": "R",
          "scriptOutputType": "html",
          "source": {
            "objectName": "rcv_script",
            "propertyName": "source"
          },
          "provider": {
            "objectName": "rcv_script",
            "propertyName": "provider"
          }
        }
      }
    }
  ],
  "objects": {

    "outputtypesettings": {
      "displayName": "Output Type",
      "description": "Output Type",
      "properties": {
        "OutputType": {
          "displayName": "Select Output Type",
          "description": "Select whether to display a graph, card or summary table (coming soon)",
          "type": {
            "enumeration": [
              {
                "displayName": "Graph",
                "value": "graph"
              },
              {
                "displayName": "Card",
                "value": "card"
              },
              {
                "displayName": "Summary Table",
                "value": "summarytable"
              },
              {
                "displayName": "Summary Matrix",
                "value": "summarymatrix"
              }
            ]
          }
        }
    }
    },


    "titlesettings": {
      "displayName": "Title Settings",
      "description": "Title and Title Size",
      "properties": {
        "ChartTitle": {
          "displayName": "Chart Title",
          "description": "Set chart title",
          "type": {
            "text": true
          }
        },
        "TitleSize": {
          "displayName": "Title Font Size",
          "description": "Set size of font",
          "type": {
            "numeric": true
          }
        },

        "TitleJustification": {
          "displayName": "Title Justification",
          "description": "Set Title Justification",
          "type": {
            "enumeration": [
              {
                "displayName": "Central",
                "value": "central"
              },
              {
                "displayName": "Left",
                "value": "left"
              }
            ]
          }
        }

      }
    },

    "xaxissettings": {
      "displayName": "X Axis Settings",
      "description": "X Axis theme and title",
      "properties": {
        "XAxisTitle": {
          "displayName": "X Axis Title",
          "description": "Set X Axis Title",
          "type": {
            "text": true
          }
        }
    }
  },

  "yaxissettings": {
    "displayName": "Y Axis Settings",
    "description": "Y Axis theme and title",
    "properties": {
      "YAxisTitle": {
        "displayName": "Y Axis Title",
        "description": "Set Y Axis Title",
        "type": {
          "text": true
        }
      }
  }
},

"pointsettings": {
  "displayName": "Point Settings",
  "description": "Point size",
  "properties": {
    "PointSize": {
      "displayName": "Point Size",
      "description": "Set Point Size",
      "type": {
        "numeric": true
      }
    }
}
},

"legendsettings": {
  "displayName": "Legend Settings",
  "description": "Legend position",
  "properties": {
    "LegendPosition": {
      "displayName": "Legend position",
      "description": "Set legend position or turn legend off",
      "type": {
        "enumeration": [
          {
            "displayName": "Below",
            "value": "below"
          },
          {
            "displayName": "Right",
            "value": "right"
          },
          {
            "displayName": "Off",
            "value": "off"
          }
        ]
      }
    }
}
},

"iconsettings": {
  "displayName": "Icon Settings",
  "description": "Icon size",
  "properties": {
    "IconSize": {
      "displayName": "Icon Size",
      "description": "Set Icon Size",
      "type": {
        "numeric": true
      }
    }
}
},

"cardsettings": {
  "displayName": "Card Settings",
  "description": "Card theme and settings",
  "properties": {

    "CardPrefix": {
      "displayName": "Card Prefix",
      "description": "Value to appear before card value",
      "type": {
        "text": true
      }
    },

    "CardSuffix": {
      "displayName": "Card Suffix",
      "description": "Value to appear after card value",
      "type": {
        "text": true
      }
    },

    "ValueSize": {
      "displayName": "Value Size",
      "description": "Set Value Size",
      "type": {
        "numeric": true
      }
    },

    "IconPosition": {
      "displayName": "Icon Position",
      "description": "Set Value Size",
      "type": {
        "enumeration": [
          {
            "displayName": "Central",
            "value": "central"
          },
          {
            "displayName": "Right",
            "value": "right"
          }
        ]
      }
    },

    "CardTitleJustification": {
      "displayName": "Card Title Justification",
      "description": "Set Card Title Justification",
      "type": {
        "enumeration": [
          {
            "displayName": "Central",
            "value": "central"
          },
          {
            "displayName": "Left",
            "value": "left"
          }
        ]
      }
    }

}
},


    "rcv_script": {
      "properties": {
        "provider": {
          "type": {
            "text": true
          }
        },
        "source": {
          "type": {
            "scripting": {
              "source": true
            }
          }
        }
      }
    }
  },
  "suppressDefaultTitle": true
}
